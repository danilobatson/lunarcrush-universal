# LunarCrush Universal Backend - CORRECTED API Schema
# Fixed to match actual LunarCrush API v4 responses
# https://lunarcrush.com/developers/api/endpoints
# Single source of truth for all LunarCrush API types

scalar Date
scalar JSON

# ===== ENUMS =====

enum TimeInterval {
  ONE_HOUR
  FOUR_HOURS
  ONE_DAY
  ONE_WEEK
  ONE_MONTH
}

enum SortDirection {
  ASC
  DESC
}

# ===== QUERY ROOT =====

type Query {
  # Health check
  health: String

  # ===== TOPICS ENDPOINTS =====
  getTopicsList: [TopicListItem]
  getTopic(topic: String): TopicDetails
  getTopicWhatsup(topic: String): TopicWhatsup
  getTopicTimeSeries(topic: String, bucket: String, interval: String, start: String, end: String): [TopicTimeSeriesItem]
  getTopicTimeSeriesV2(topic: String, bucket: String): [TopicTimeSeriesItem]
  getTopicPosts(topic: String, start: String, end: String): [TopicPost]
  getTopicNews(topic: String): [TopicNews]
  getTopicCreators(topic: String): [TopicCreator]

  # ===== CATEGORIES ENDPOINTS =====
  getCategoriesList: [CategoryListItem]
  getCategory(category: String): CategoryDetails
  getCategoryTopics(category: String): [CategoryTopic]
  getCategoryTimeSeries(category: String, bucket: String, interval: String, start: String, end: String): [CategoryTimeSeriesItem]
  getCategoryPosts(category: String, start: String, end: String): [CategoryPost]
  getCategoryNews(category: String): [CategoryNews]
  getCategoryCreators(category: String): [CategoryCreator]

  # ===== CREATORS ENDPOINTS =====
  getCreatorsList: [CreatorListItem]
  getCreator(network: String, id: String): CreatorDetails
  getCreatorTimeSeries(network: String, id: String, bucket: String, interval: String, start: String, end: String): [CreatorTimeSeriesItem]
  getCreatorPosts(network: String, id: String, start: String, end: String): [CreatorPost]

  # ===== COINS ENDPOINTS (Fixed argument names) =====
  getCoinsList: [CoinListItem]
  getCoinsListV2: [CoinListItem]
  getCoin(coin: String): CoinDetails  # Fixed: coin not symbol
  getCoinTimeSeries(coin: String, bucket: String, interval: String, start: String, end: String): [CoinTimeSeriesItem]  # Fixed: coin not symbol
  getCoinMeta(coin: String): CoinMeta  # Fixed: coin not symbol

  # ===== STOCKS ENDPOINTS (Fixed argument names) =====
  getStocksList: [StockListItem]
  getStocksListV2: [StockListItem]
  getStock(stock: String): StockDetails  # Fixed: stock not symbol
  getStockTimeSeries(stock: String, bucket: String, interval: String, start: String, end: String): [StockTimeSeriesItem]  # Fixed: stock not symbol

  # ===== NFTS ENDPOINTS (Fixed argument names) =====
  getNftsList: [NftListItem]
  getNftsListV2: [NftListItem]
  getNft(collection: String): NftDetails  # Fixed: collection not id
  getNftTimeSeries(collection: String, bucket: String, interval: String, start: String, end: String): [NftTimeSeriesItem]  # Fixed: collection not id
  getNftTimeSeriesV1(collection: String, bucket: String, interval: String, start: String, end: String): JSON  # Fixed: returns JSON scalar

  # ===== SYSTEM ENDPOINTS (Fixed return types and arguments) =====
  getSystemChanges: [SystemChange]
  getSearchesList: [SearchItem]  # Fixed: SearchItem not SearchList
  getSearch(search_id: String): JSON  # Fixed: returns JSON scalar, argument name
  searchPosts(term: String): JSON  # Fixed: returns JSON scalar
  getPostDetails(post_id: String): PostDetails  # Fixed: post_id not id
  getPostTimeSeries(post_id: String, bucket: String, interval: String, start: String, end: String): [PostTimeSeriesItem]  # Fixed: post_id not id
}

# ===== CORRECTED TYPE DEFINITIONS =====

# Topics Types (mostly correct)
type TopicListItem {
  topic: String
  title: String
  topic_rank: Int
  topic_rank_1h_previous: Int
  topic_rank_24h_previous: Int
  num_contributors: Float
  num_posts: Float
  interactions_24h: Float
}

type TopicDetails {
  topic: String
  title: String
  topic_rank: Int
  related_topics: [String]
  types_count: JSON
  types_interactions: JSON
  types_sentiment: JSON
  types_sentiment_detail: JSON
  interactions_24h: Float
  num_contributors: Int
  num_posts: Int
  categories: [String]
  trend: String
}

type TopicWhatsup {
  summary: String
}

type TopicTimeSeriesItem {
  time: Int
  contributors_active: Int
  contributors_created: Int
  interactions: Float
  posts_active: Int
  posts_created: Int
  sentiment: Float
  spam: Int
  alt_rank: Int
  circulating_supply: Float
  close: Float
  galaxy_score: Float
  high: Float
  low: Float
  market_cap: Float
  market_dominance: Float
  open: Float
  social_dominance: Float
  volume_24h: Float
}

type TopicPost {
  id: String
  post_type: String
  post_title: String
  post_link: String
  post_image: String
  post_created: Int
  post_sentiment: Float
  creator_id: String
  creator_name: String
  creator_display_name: String
  creator_followers: Float
  creator_avatar: String
  interactions_24h: Float
  interactions_total: Float
}

type TopicNews {
  id: String
  post_type: String
  post_title: String
  post_link: String
  post_image: String
  post_created: Int
  post_sentiment: Float
  creator_id: String
}

# Fixed TopicCreator with correct field names
type TopicCreator {
  creator_id: String  # Fixed: was 'id'
  creator_name: String  # Fixed: was 'name'
  creator_display_name: String  # Fixed: was 'display_name'
  creator_followers: Float  # Fixed: was 'followers'
  creator_avatar: String  # Fixed: was 'avatar'
  interactions_24h: Float
}

# Fixed Category types
type CategoryListItem {
  category: String
  name: String  # Fixed: was 'title'
}

type CategoryDetails {
  category: String
  name: String  # Fixed: was 'title'
  description: String
}

type CategoryTopic {
  topic: String
  title: String
}

type CategoryTimeSeriesItem {
  time: Int
  interactions: Float
}

type CategoryPost {
  id: String
  post_title: String  # Fixed: was 'title'
}

type CategoryNews {
  id: String
  post_title: String  # Fixed: was 'title'
}

type CategoryCreator {
  creator_id: String  # Fixed: was 'id'
  creator_name: String  # Fixed: was 'name'
}

# Fixed Creator types
type CreatorListItem {
  creator_id: String  # Fixed: was 'id'
  creator_name: String  # Fixed: was 'name'
  creator_display_name: String  # Fixed: was 'display_name'
  creator_followers: Float  # Fixed: was 'followers'
  network: String
}

type CreatorDetails {
  creator_id: String  # Fixed: was 'id'
  creator_name: String  # Fixed: was 'name'
  creator_display_name: String  # Fixed: was 'display_name'
  creator_followers: Float  # Fixed: was 'followers'
  network: String
  creator_avatar: String  # Fixed: was 'avatar'
}

type CreatorTimeSeriesItem {
  time: Int
  interactions: Float
}

type CreatorPost {
  id: String
  post_title: String  # Fixed: was 'title'
}

# Fixed Coin types
type CoinListItem {
  coin: String  # Fixed: primary identifier
  name: String
  symbol: String  # Still exists but 'coin' is the ID
  logo: String
  price: Float  # Fixed: was 'close'
  market_cap: Float
  alt_rank: Int
}

type CoinDetails {
  coin: String  # Fixed: primary identifier
  name: String
  symbol: String
  logo: String
  price: Float  # Fixed: was 'close'
  market_cap: Float
  alt_rank: Int
  interactions_24h: Float
}

type CoinTimeSeriesItem {
  time: Int
  close: Float  # This one stays 'close' for time series
  high: Float
  low: Float
  volume_24h: Float
}

type CoinMeta {
  coin: String  # Fixed: was 'symbol'
  name: String
  description: String
}

# Fixed Stock types
type StockListItem {
  stock: String  # Fixed: primary identifier
  name: String
  symbol: String  # Still exists but 'stock' is the ID
  logo: String
  price: Float  # Fixed: was 'close'
}

type StockDetails {
  stock: String  # Fixed: primary identifier
  name: String
  symbol: String
  logo: String
  price: Float  # Fixed: was 'close'
  interactions_24h: Float
}

type StockTimeSeriesItem {
  time: Int
  close: Float  # This one stays 'close' for time series
  volume: Float
}

# Fixed NFT types
type NftListItem {
  collection: String  # Fixed: was 'id'
  name: String
  logo: String
  floor_price: Float
}

type NftDetails {
  collection: String  # Fixed: was 'id'
  name: String
  logo: String
  floor_price: Float
  interactions_24h: Float
}

type NftTimeSeriesItem {
  time: Int
  floor_price: Float
  volume: Float
}

# Fixed System types
type SystemChange {
  change_id: String  # Fixed: was 'id'
  type: String
  description: String  # Fixed: was 'change'
  timestamp: Int
}

type SearchItem {  # Fixed: was SearchList
  search_id: String  # Fixed: was 'id'
  search_query: String  # Fixed: was 'query'
  created: Int
}

type PostDetails {
  id: String
  post_title: String  # Fixed: was 'title'
  post_content: String  # Fixed: was 'content'
}

type PostTimeSeriesItem {
  time: Int
  interactions: Float
}
