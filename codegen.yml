schema: './schema/schema.graphql'
overwrite: true

config:
  scalars:
    Date: string
    JSON: any
    UnixTimestamp: string
  enumsAsTypes: false
  optionalType: undefined | null

generates:
  # HONO BACKEND - Workers Runtime Compatible
  ./packages/hono/src/types/generated.ts:
    plugins:
      - add:
          content: |
            /* eslint-disable */
            // ================================================================
            // ðŸš¨ AUTO-GENERATED - DO NOT EDIT MANUALLY! ðŸš¨
            // ================================================================
            // Generated from: schema/schema.graphql
            // Command: yarn codegen
            //
            // To make changes:
            // 1. Edit schema/schema.graphql
            // 2. Run: yarn codegen
            // 3. NEVER edit this file directly!
            // ================================================================
      - 'typescript'
    config:
      scalars:
        Date: string
        JSON: any
        UnixTimestamp: string
      enumsAsTypes: false
      declarationKind: interface

  ./packages/hono/src/graphql/resolvers-types.ts:
    plugins:
      - add:
          content: |
            /* eslint-disable */
            // ================================================================
            // ðŸš¨ AUTO-GENERATED RESOLVER TYPES - DO NOT EDIT! ðŸš¨
            // ================================================================
            // Generated from: schema/schema.graphql
            // Command: yarn codegen
            // Use: import type { Resolvers } from './resolvers-types'
            // ================================================================
      - 'typescript'
      - 'typescript-resolvers'
    config:
      scalars:
        Date: string
        JSON: any
        UnixTimestamp: string
      contextType: '../types#AppContext'
      resolverTypeWrapperSignature: 'Promise<T> | T'

  # ðŸ”§ Generate schema string for hono package (main schema import)
  ./packages/hono/src/schema.ts:
    plugins:
      - add:
          content: |
            /* eslint-disable */
            // ================================================================
            // ðŸš¨ AUTO-GENERATED SCHEMA - DO NOT EDIT MANUALLY! ðŸš¨
            // ================================================================
            // Generated from: schema/schema.graphql
            // Command: yarn codegen
            //
            // To make changes:
            // 1. Edit schema/schema.graphql
            // 2. Run: yarn codegen
            // 3. NEVER edit this file directly!
            // ================================================================

            /**
             * LunarCrush GraphQL Schema - Auto-Generated from Single Source of Truth
             * Source: schema/schema.graphql
             * Generated: ${new Date().toISOString()}
             */

      - 'schema-ast'
    config:
      includeDirectives: false

  # SDK OPERATIONS - Generated from implemented resolvers only
  ./packages/sdk/src/generated/operations.ts:
    documents: './packages/sdk/operations.graphql'
    plugins:
      - add:
          content: |
            /* eslint-disable */
            // ================================================================
            // ðŸš¨ AUTO-GENERATED SDK OPERATIONS - DO NOT EDIT! ðŸš¨
            // ================================================================
            // Generated from: packages/sdk/operations.graphql (resolver-based)
            // Command: yarn codegen
            //
            // Contains ONLY operations implemented in resolvers.ts
            // No manual queries - all generated from actual implementations
            // ================================================================
      - 'typescript'
      - 'typescript-operations'
      - 'typescript-graphql-request'
    config:
      scalars:
        Date: string
        JSON: Record<string, any>
        UnixTimestamp: string
      enumsAsTypes: true
      gqlImport: graphql-request#gql
      documentMode: string

  # DOCUMENTATION (optional)
  ./docs/api-schema.md:
    plugins:
      - add:
          content: |
            # LunarCrush Universal API Schema

            > ðŸš¨ **AUTO-GENERATED** - Do not edit manually!
            >
            > **Single Source of Truth:** `schema/schema.graphql`
            >
            > Generated from: `schema/schema.graphql`
            > Command: `yarn codegen`
            >
            > All code generation, type definitions, and schema references
            > should use `schema/schema.graphql` as the canonical source.

            ## GraphQL Schema

      - 'schema-ast'
