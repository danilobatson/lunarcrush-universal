schema: './schema/schema.graphql'
overwrite: true

config:
  scalars:
    Date: string
    JSON: any
  enumsAsTypes: false
  optionalType: undefined | null

generates:
  # HONO BACKEND - Workers Runtime Compatible
  ./packages/hono/src/types/generated.ts:
    plugins:
      - add:
          content: |
            /* eslint-disable */
            // ================================================================
            // ðŸš¨ AUTO-GENERATED - DO NOT EDIT MANUALLY! ðŸš¨
            // ================================================================
            // Generated from: schema/schema.graphql
            // Command: yarn codegen
            //
            // To make changes:
            // 1. Edit schema/schema.graphql
            // 2. Run: yarn codegen
            // 3. NEVER edit this file directly!
            // ================================================================
      - 'typescript'
    config:
      scalars:
        Date: string
        JSON: any
      enumsAsTypes: false
      declarationKind: interface

  ./packages/hono/src/graphql/resolvers-types.ts:
    plugins:
      - add:
          content: |
            /* eslint-disable */
            // ================================================================
            // ðŸš¨ AUTO-GENERATED RESOLVER TYPES - DO NOT EDIT! ðŸš¨
            // ================================================================
            // Generated from: schema/schema.graphql
            // Command: yarn codegen
            // Use: import type { Resolvers } from './resolvers-types'
            // ================================================================
      - 'typescript'
      - 'typescript-resolvers'
    config:
      scalars:
        Date: string
        JSON: any
      contextType: '../types#AppContext'
      resolverTypeWrapperSignature: 'Promise<T> | T'

  # ðŸ”§ Generate schema string for hono package (main schema import)
  ./packages/hono/src/schema.ts:
    plugins:
      - add:
          content: |
            /* eslint-disable */
            // ================================================================
            // ðŸš¨ AUTO-GENERATED SCHEMA - DO NOT EDIT MANUALLY! ðŸš¨
            // ================================================================
            // Generated from: schema/schema.graphql
            // Command: yarn codegen
            //
            // To make changes:
            // 1. Edit schema/schema.graphql
            // 2. Run: yarn codegen
            // 3. NEVER edit this file directly!
            // ================================================================

            /**
             * LunarCrush GraphQL Schema - Auto-Generated from Single Source of Truth
             * Source: schema/schema.graphql
             * Generated: ${new Date().toISOString()}
             */

      - 'schema-ast'
    config:
      includeDirectives: false

  # SDK PACKAGE
  ./packages/sdk/src/types/generated.ts:
    plugins:
      - add:
          content: |
            /* eslint-disable */
            // ================================================================
            // ðŸš¨ AUTO-GENERATED SDK TYPES - DO NOT EDIT! ðŸš¨
            // ================================================================
            // Generated from: schema/schema.graphql
            // Command: yarn codegen
            // Use: import type { TopicListItem } from './types/generated'
            // ================================================================
      - 'typescript'
    config:
      scalars:
        Date: string
        JSON: Record<string, any> # SDK prefers Record
      enumsAsTypes: true

  # CLI PACKAGE
  ./packages/cli/src/types/generated.ts:
    plugins:
      - add:
          content: |
            /* eslint-disable */
            // ================================================================
            // ðŸš¨ AUTO-GENERATED CLI TYPES - DO NOT EDIT! ðŸš¨
            // ================================================================
            // Generated from: schema/schema.graphql
            // Command: yarn codegen
            // Use: import type { TopicListItem } from './types/generated'
            // ================================================================
      - 'typescript'
    config:
      scalars:
        Date: string
        JSON: unknown # CLI prefers unknown for safety
      enumsAsTypes: true

  # DOCUMENTATION (optional)
  ./docs/api-schema.md:
    plugins:
      - add:
          content: |
            # LunarCrush Universal API Schema

            > ðŸš¨ **AUTO-GENERATED** - Do not edit manually!
            >
            > **Single Source of Truth:** `schema/schema.graphql`
            >
            > Generated from: `schema/schema.graphql`
            > Command: `yarn codegen`
            >
            > All code generation, type definitions, and schema references
            > should use `schema/schema.graphql` as the canonical source.

            ## GraphQL Schema

      - 'schema-ast'
